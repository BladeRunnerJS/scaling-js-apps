<!DOCTYPE HTML>
<html lang="en-US" manifest="../manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Exercise: User Card | How to Build Front-End Web Apps that Scale</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="BladeRunnerJS">
        <meta name="description" content="![How to Build Front-End Web Apps that Scale](./img/apps-that-scale.jpg)">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../blades/retrospective.html" />
        
        
        <link rel="prev" href="../blades/messages_blade.html" />
        

        <meta property="og:title" content="Exercise: User Card | How to Build Front-End Web Apps that Scale">
        <meta property="og:site_name" content="How to Build Front-End Web Apps that Scale">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/BladeRunnerJS">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="../gitbook/style.css">
        


        
    <div class="book" data-github="BladeRunnerJS/scaling-js-apps" data-level="4.9" data-basepath=".." data-revision="1406137654375">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/BladeRunnerJS/scaling-js-apps" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/BladeRunnerJS/scaling-js-apps/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/BladeRunnerJS/scaling-js-apps/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >How to Build Front-End Web Apps that Scale</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/BladeRunnerJS" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/BladeRunnerJS/scaling-js-apps/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/BladeRunnerJS/scaling-js-apps/edit/master/blades/usercard_blade.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="overview/README.html">
                
                <a href="../overview/README.html">
                    <i class="fa fa-check"></i> <b>1.</b> Workshop Overview
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="overview/who.html">
                            
                            <a href="../overview/who.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Who are we?
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="overview/schedule.html">
                            
                            <a href="../overview/schedule.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Schedule
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="overview/learn.html">
                            
                            <a href="../overview/learn.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> What we&#39;re going to learn
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="overview/build.html">
                            
                            <a href="../overview/build.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> What we&#39;re going to build
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="overview/teams.html">
                            
                            <a href="../overview/teams.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Organisations &amp; Teams
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="overview/prerequisites.html">
                            
                            <a href="../overview/prerequisites.html">
                                <i class="fa fa-check"></i> <b>1.6.</b> Prerequisites
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.7" data-path="overview/heads_up.html">
                            
                            <a href="../overview/heads_up.html">
                                <i class="fa fa-check"></i> <b>1.7.</b> Heads Up!
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="knockout/README.html">
                
                <a href="../knockout/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> KnockoutJS
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="knockout/exercises.html">
                            
                            <a href="../knockout/exercises.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Exercise: KnockoutJS
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="background/README.html">
                
                <a href="../background/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Background
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="background/large_scale.html">
                            
                            <a href="../background/large_scale.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> What is a Large Scale Front-End App?
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="background/large_codebase.html">
                            
                            <a href="../background/large_codebase.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Large Codebase
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="background/ct_codebase.html">
                            
                            <a href="../background/ct_codebase.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> Example Large Codebase
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="background/complexity.html">
                            
                            <a href="../background/complexity.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> Complexity
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.5" data-path="background/gmail.html">
                            
                            <a href="../background/gmail.html">
                                <i class="fa fa-check"></i> <b>3.5.</b> Gmail
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.6" data-path="background/caplin_trader.html">
                            
                            <a href="../background/caplin_trader.html">
                                <i class="fa fa-check"></i> <b>3.6.</b> Caplin Trader
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.7" data-path="background/large_spa.html">
                            
                            <a href="../background/large_spa.html">
                                <i class="fa fa-check"></i> <b>3.7.</b> Large SPAs
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.8" data-path="background/contributors.html">
                            
                            <a href="../background/contributors.html">
                                <i class="fa fa-check"></i> <b>3.8.</b> Contributors
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.9" data-path="background/who_contributes.html">
                            
                            <a href="../background/who_contributes.html">
                                <i class="fa fa-check"></i> <b>3.9.</b> Who Contributes?
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.10" data-path="background/questions.html">
                            
                            <a href="../background/questions.html">
                                <i class="fa fa-check"></i> <b>3.10.</b> Lots of Questions?
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.11" data-path="background/approach.html">
                            
                            <a href="../background/approach.html">
                                <i class="fa fa-check"></i> <b>3.11.</b> Workshop Approach
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="blades/README.html">
                
                <a href="../blades/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Features/Blades
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="blades/overview.html">
                            
                            <a href="../blades/overview.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Overview
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="blades/problems_solved.html">
                            
                            <a href="../blades/problems_solved.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Problems Solved
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3" data-path="blades/find_code.html">
                            
                            <a href="../blades/find_code.html">
                                <i class="fa fa-check"></i> <b>4.3.</b> Where&#39;s the Code?
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.4" data-path="blades/broken_app.html">
                            
                            <a href="../blades/broken_app.html">
                                <i class="fa fa-check"></i> <b>4.4.</b> Who Broke the App?
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.5" data-path="blades/f5_compile.html">
                            
                            <a href="../blades/f5_compile.html">
                                <i class="fa fa-check"></i> <b>4.5.</b> F5 is the New Compile
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.6" data-path="blades/exercises.html">
                            
                            <a href="../blades/exercises.html">
                                <i class="fa fa-check"></i> <b>4.6.</b> Exercises
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.7" data-path="blades/input_blade.html">
                            
                            <a href="../blades/input_blade.html">
                                <i class="fa fa-check"></i> <b>4.7.</b> Exercise: Input
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.8" data-path="blades/messages_blade.html">
                            
                            <a href="../blades/messages_blade.html">
                                <i class="fa fa-check"></i> <b>4.8.</b> Exercise: Messages
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.9" data-path="blades/usercard_blade.html">
                            
                            <a href="../blades/usercard_blade.html">
                                <i class="fa fa-check"></i> <b>4.9.</b> Exercise: User Card
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.10" data-path="blades/retrospective.html">
                            
                            <a href="../blades/retrospective.html">
                                <i class="fa fa-check"></i> <b>4.10.</b> Retrospective
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="aspects/README.html">
                
                <a href="../aspects/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> Apps &amp; Aspects
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="aspects/exercise.html">
                            
                            <a href="../aspects/exercise.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Composing Blades into Aspects
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="aspects/retrospective.html">
                            
                            <a href="../aspects/retrospective.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> Retrospective
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="services/README.html">
                
                <a href="../services/README.html">
                    <i class="fa fa-check"></i> <b>6.</b> Services &amp; the ServiceRegistry
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="6.1" data-path="services/services.html">
                            
                            <a href="../services/services.html">
                                <i class="fa fa-check"></i> <b>6.1.</b> Services
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.2" data-path="services/service_registry.html">
                            
                            <a href="../services/service_registry.html">
                                <i class="fa fa-check"></i> <b>6.2.</b> ServiceRegistry
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.3" data-path="services/problems_solved.html">
                            
                            <a href="../services/problems_solved.html">
                                <i class="fa fa-check"></i> <b>6.3.</b> Problems Solved
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.4" data-path="services/dev_dependencies.html">
                            
                            <a href="../services/dev_dependencies.html">
                                <i class="fa fa-check"></i> <b>6.4.</b> Developer Environment Dependencies
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.5" data-path="services/required_dependencies.html">
                            
                            <a href="../services/required_dependencies.html">
                                <i class="fa fa-check"></i> <b>6.5.</b> Required Dependencies
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.6" data-path="services/no_dependencies.html">
                            
                            <a href="../services/no_dependencies.html">
                                <i class="fa fa-check"></i> <b>6.6.</b> No Backend Dependencies
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.7" data-path="services/configuring_services.html">
                            
                            <a href="../services/configuring_services.html">
                                <i class="fa fa-check"></i> <b>6.7.</b> Configuring Services
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.8" data-path="services/workbenches.html">
                            
                            <a href="../services/workbenches.html">
                                <i class="fa fa-check"></i> <b>6.8.</b> Workbenches
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.9" data-path="services/full_feature_testing.html">
                            
                            <a href="../services/full_feature_testing.html">
                                <i class="fa fa-check"></i> <b>6.9.</b> Modular App Services
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.10" data-path="services/modularapp_services.html">
                            
                            <a href="../services/modularapp_services.html">
                                <i class="fa fa-check"></i> <b>6.10.</b> Modular App Services
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.11" data-path="services/user_service.html">
                            
                            <a href="../services/user_service.html">
                                <i class="fa fa-check"></i> <b>6.11.</b> User Service
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.12" data-path="services/chat_service.html">
                            
                            <a href="../services/chat_service.html">
                                <i class="fa fa-check"></i> <b>6.12.</b> Chat Service
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.13" data-path="services/exercises_overview.html">
                            
                            <a href="../services/exercises_overview.html">
                                <i class="fa fa-check"></i> <b>6.13.</b> Exercises Overview
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.14" data-path="services/input_services.html">
                            
                            <a href="../services/input_services.html">
                                <i class="fa fa-check"></i> <b>6.14.</b> Exercise: Input Blade &amp; Services
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.15" data-path="services/messages_services.html">
                            
                            <a href="../services/messages_services.html">
                                <i class="fa fa-check"></i> <b>6.15.</b> Exercise: Messages Blade &amp; Services
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.16" data-path="services/usercard_services.html">
                            
                            <a href="../services/usercard_services.html">
                                <i class="fa fa-check"></i> <b>6.16.</b> Exercise: User Card Blade &amp; Services
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.17" data-path="services/retrospective.html">
                            
                            <a href="../services/retrospective.html">
                                <i class="fa fa-check"></i> <b>6.17.</b> Retrospective
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="7" data-path="aspects_services/README.html">
                
                <a href="../aspects_services/README.html">
                    <i class="fa fa-check"></i> <b>7.</b> Apps &amp; Aspects (again)
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="7.1" data-path="aspects_services/retrospective.html">
                            
                            <a href="../aspects_services/retrospective.html">
                                <i class="fa fa-check"></i> <b>7.1.</b> Retrospective
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="8" data-path="extras/README.html">
                
                <a href="../extras/README.html">
                    <i class="fa fa-check"></i> <b>8.</b> Extras
                </a>
                
                
            </li>
        
            <li  data-level="9" data-path="thats_a_wrap.html">
                
                <a href="../thats_a_wrap.html">
                    <i class="fa fa-check"></i> <b>9.</b> That&#39;s a Wrap!
                </a>
                
                
            </li>
        
            <li  data-level="10" >
                
                <span><b>10.</b> Reference</span>
                
                
                <ul class="articles">
                    
                        <li  data-level="10.1" data-path="reference/dev_setup.html">
                            
                            <a href="../reference/dev_setup.html">
                                <i class="fa fa-check"></i> <b>10.1.</b> Suggested Dev Setup
                            </a>
                            
                        </li>
                    
                        <li  data-level="10.2" data-path="reference/faq_gotchas.html">
                            
                            <a href="../reference/faq_gotchas.html">
                                <i class="fa fa-check"></i> <b>10.2.</b> FAQ &amp; Gotchas
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 58.333333333333336%;min-width: 56.666666666666664%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../overview/README.html" title="Workshop Overview" class="chapter done new-chapter" data-progress="1" style="left: 1.6666666666666667%;"></a>
    
        <a href="../overview/who.html" title="Who are we?" class="chapter done " data-progress="1.1" style="left: 3.3333333333333335%;"></a>
    
        <a href="../overview/schedule.html" title="Schedule" class="chapter done " data-progress="1.2" style="left: 5%;"></a>
    
        <a href="../overview/learn.html" title="What we&#39;re going to learn" class="chapter done " data-progress="1.3" style="left: 6.666666666666667%;"></a>
    
        <a href="../overview/build.html" title="What we&#39;re going to build" class="chapter done " data-progress="1.4" style="left: 8.333333333333334%;"></a>
    
        <a href="../overview/teams.html" title="Organisations &amp; Teams" class="chapter done " data-progress="1.5" style="left: 10%;"></a>
    
        <a href="../overview/prerequisites.html" title="Prerequisites" class="chapter done " data-progress="1.6" style="left: 11.666666666666666%;"></a>
    
        <a href="../overview/heads_up.html" title="Heads Up!" class="chapter done " data-progress="1.7" style="left: 13.333333333333334%;"></a>
    
        <a href="../reference/dev_setup.html" title="Suggested Dev Setup" class="chapter done " data-progress="10.1" style="left: 15%;"></a>
    
        <a href="../reference/faq_gotchas.html" title="FAQ &amp; Gotchas" class="chapter done " data-progress="10.2" style="left: 16.666666666666668%;"></a>
    
        <a href="../knockout/README.html" title="KnockoutJS" class="chapter done new-chapter" data-progress="2" style="left: 18.333333333333332%;"></a>
    
        <a href="../knockout/exercises.html" title="Exercise: KnockoutJS" class="chapter done " data-progress="2.1" style="left: 20%;"></a>
    
        <a href="../background/README.html" title="Background" class="chapter done new-chapter" data-progress="3" style="left: 21.666666666666668%;"></a>
    
        <a href="../background/large_scale.html" title="What is a Large Scale Front-End App?" class="chapter done " data-progress="3.1" style="left: 23.333333333333332%;"></a>
    
        <a href="../background/questions.html" title="Lots of Questions?" class="chapter done " data-progress="3.10" style="left: 25%;"></a>
    
        <a href="../background/approach.html" title="Workshop Approach" class="chapter done " data-progress="3.11" style="left: 26.666666666666668%;"></a>
    
        <a href="../background/large_codebase.html" title="Large Codebase" class="chapter done " data-progress="3.2" style="left: 28.333333333333332%;"></a>
    
        <a href="../background/ct_codebase.html" title="Example Large Codebase" class="chapter done " data-progress="3.3" style="left: 30%;"></a>
    
        <a href="../background/complexity.html" title="Complexity" class="chapter done " data-progress="3.4" style="left: 31.666666666666668%;"></a>
    
        <a href="../background/gmail.html" title="Gmail" class="chapter done " data-progress="3.5" style="left: 33.333333333333336%;"></a>
    
        <a href="../background/caplin_trader.html" title="Caplin Trader" class="chapter done " data-progress="3.6" style="left: 35%;"></a>
    
        <a href="../background/large_spa.html" title="Large SPAs" class="chapter done " data-progress="3.7" style="left: 36.666666666666664%;"></a>
    
        <a href="../background/contributors.html" title="Contributors" class="chapter done " data-progress="3.8" style="left: 38.333333333333336%;"></a>
    
        <a href="../background/who_contributes.html" title="Who Contributes?" class="chapter done " data-progress="3.9" style="left: 40%;"></a>
    
        <a href="../blades/README.html" title="Features/Blades" class="chapter done new-chapter" data-progress="4" style="left: 41.666666666666664%;"></a>
    
        <a href="../blades/overview.html" title="Overview" class="chapter done " data-progress="4.1" style="left: 43.333333333333336%;"></a>
    
        <a href="../blades/retrospective.html" title="Retrospective" class="chapter done " data-progress="4.10" style="left: 45%;"></a>
    
        <a href="../blades/problems_solved.html" title="Problems Solved" class="chapter done " data-progress="4.2" style="left: 46.666666666666664%;"></a>
    
        <a href="../blades/find_code.html" title="Where&#39;s the Code?" class="chapter done " data-progress="4.3" style="left: 48.333333333333336%;"></a>
    
        <a href="../blades/broken_app.html" title="Who Broke the App?" class="chapter done " data-progress="4.4" style="left: 50%;"></a>
    
        <a href="../blades/f5_compile.html" title="F5 is the New Compile" class="chapter done " data-progress="4.5" style="left: 51.666666666666664%;"></a>
    
        <a href="../blades/exercises.html" title="Exercises" class="chapter done " data-progress="4.6" style="left: 53.333333333333336%;"></a>
    
        <a href="../blades/input_blade.html" title="Exercise: Input" class="chapter done " data-progress="4.7" style="left: 55%;"></a>
    
        <a href="../blades/messages_blade.html" title="Exercise: Messages" class="chapter done " data-progress="4.8" style="left: 56.666666666666664%;"></a>
    
        <a href="../blades/usercard_blade.html" title="Exercise: User Card" class="chapter done " data-progress="4.9" style="left: 58.333333333333336%;"></a>
    
        <a href="../aspects/README.html" title="Apps &amp; Aspects" class="chapter  new-chapter" data-progress="5" style="left: 60%;"></a>
    
        <a href="../aspects/exercise.html" title="Composing Blades into Aspects" class="chapter  " data-progress="5.1" style="left: 61.666666666666664%;"></a>
    
        <a href="../aspects/retrospective.html" title="Retrospective" class="chapter  " data-progress="5.2" style="left: 63.333333333333336%;"></a>
    
        <a href="../services/README.html" title="Services &amp; the ServiceRegistry" class="chapter  new-chapter" data-progress="6" style="left: 65%;"></a>
    
        <a href="../services/services.html" title="Services" class="chapter  " data-progress="6.1" style="left: 66.66666666666667%;"></a>
    
        <a href="../services/modularapp_services.html" title="Modular App Services" class="chapter  " data-progress="6.10" style="left: 68.33333333333333%;"></a>
    
        <a href="../services/user_service.html" title="User Service" class="chapter  " data-progress="6.11" style="left: 70%;"></a>
    
        <a href="../services/chat_service.html" title="Chat Service" class="chapter  " data-progress="6.12" style="left: 71.66666666666667%;"></a>
    
        <a href="../services/exercises_overview.html" title="Exercises Overview" class="chapter  " data-progress="6.13" style="left: 73.33333333333333%;"></a>
    
        <a href="../services/input_services.html" title="Exercise: Input Blade &amp; Services" class="chapter  " data-progress="6.14" style="left: 75%;"></a>
    
        <a href="../services/messages_services.html" title="Exercise: Messages Blade &amp; Services" class="chapter  " data-progress="6.15" style="left: 76.66666666666667%;"></a>
    
        <a href="../services/usercard_services.html" title="Exercise: User Card Blade &amp; Services" class="chapter  " data-progress="6.16" style="left: 78.33333333333333%;"></a>
    
        <a href="../services/retrospective.html" title="Retrospective" class="chapter  " data-progress="6.17" style="left: 80%;"></a>
    
        <a href="../services/service_registry.html" title="ServiceRegistry" class="chapter  " data-progress="6.2" style="left: 81.66666666666667%;"></a>
    
        <a href="../services/problems_solved.html" title="Problems Solved" class="chapter  " data-progress="6.3" style="left: 83.33333333333333%;"></a>
    
        <a href="../services/dev_dependencies.html" title="Developer Environment Dependencies" class="chapter  " data-progress="6.4" style="left: 85%;"></a>
    
        <a href="../services/required_dependencies.html" title="Required Dependencies" class="chapter  " data-progress="6.5" style="left: 86.66666666666667%;"></a>
    
        <a href="../services/no_dependencies.html" title="No Backend Dependencies" class="chapter  " data-progress="6.6" style="left: 88.33333333333333%;"></a>
    
        <a href="../services/configuring_services.html" title="Configuring Services" class="chapter  " data-progress="6.7" style="left: 90%;"></a>
    
        <a href="../services/workbenches.html" title="Workbenches" class="chapter  " data-progress="6.8" style="left: 91.66666666666667%;"></a>
    
        <a href="../services/full_feature_testing.html" title="Modular App Services" class="chapter  " data-progress="6.9" style="left: 93.33333333333333%;"></a>
    
        <a href="../aspects_services/README.html" title="Apps &amp; Aspects (again)" class="chapter  new-chapter" data-progress="7" style="left: 95%;"></a>
    
        <a href="../aspects_services/retrospective.html" title="Retrospective" class="chapter  " data-progress="7.1" style="left: 96.66666666666667%;"></a>
    
        <a href="../extras/README.html" title="Extras" class="chapter  new-chapter" data-progress="8" style="left: 98.33333333333333%;"></a>
    
        <a href="../thats_a_wrap.html" title="That&#39;s a Wrap!" class="chapter  new-chapter" data-progress="9" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_30">
                    
                        <h1 id="exercise-user-card-blade-30-mins-">Exercise: User Card Blade (30 mins)</h1>
<p>Your team has landed the User Card Blade. Great catch!</p>
<p>The User Card Blade should have the following functionality:</p>
<ul>
<li>Display information about a user</li>
<li>Show based on a &#39;User Selected&#39; application interaction</li>
<li>Hide when closed</li>
</ul>
<h2 id="create-the-blade">Create the Blade</h2>
<p>You already have the application within the BladeRunnerJS installation. You&#39;ll
also notice that it has a folder called <code>chat-bladeset</code>. Don&#39;t worry about
BladeSets, we won&#39;t be using them, but our Blades will be located under this folder.</p>
<p>From the BladeRunnerJS <code>sdk</code> directory run the following command to create a Blade:</p>
<pre><code>./brjs create-blade modularapp chat usercard
</code></pre><p>You&#39;ve just scaffolded your first Blade. You can find the Blade skeleton in
<code>apps/modularapp/chat-bladeset/blades/usercard</code>.</p>
<p>You can find out more about what&#39;s just been created in the <a href="http://bladerunnerjs.org/docs/use/create_blade/" target="_blank">Create a Blade docs</a>.</p>
<h2 id="view-the-blade-a-workbench">View the Blade a Workbench</h2>
<p>Start the BRJS development server by running the following command from the <code>sdk</code>
directory:</p>
<pre><code>./brjs serve
</code></pre><p>Now navigate to <a href="http://localhost:7070/modularapp/workbench/chat/usercard/" target="_blank">http://localhost:7070/modularapp/workbench/chat/usercard/</a>
to see your <em>amazing</em> Blade.</p>
<p>Feel free to take a look around the Blade assets to see how the code is structured
and familiarise yourself with where things are.</p>
<h2 id="build-the-view">Build the View</h2>
<p>Let&#39;s update the view to have the elements we need for our required functionality.</p>
<p>Open up the <code>usercard/resources/html/view.html</code> file and make it look as follows:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">section</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"chat-usercard"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"modularapp.chat.usercard.view-template"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-avatar"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-name"</span>&gt;</span>Some Name<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-company"</span>&gt;</span>Some Company<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-email"</span>&gt;</span>some@emailaddress.com<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-location"</span>&gt;</span>Some Location<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"btn btn-default btn-xs usercard-close-btn"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"glyphicon glyphicon-remove"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>
</code></pre>
<p>Reload the Workbench to make sure this you see the fake data. We&#39;ll add the data bindings later.</p>
<p>Next, let&#39;s add some styling. Update <code>usercard/themes/standard/style.css</code> as follows:</p>
<pre><code class="lang-css"><span class="hljs-class">.chat-usercard</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value"> fixed</span></span>;

  <span class="hljs-rule"><span class="hljs-attribute">font-family</span>:<span class="hljs-value"> <span class="hljs-string">"Helvetica Neue"</span>, Helvetica, Arial, sans-serif</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">14</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">line-height</span>:<span class="hljs-value"> <span class="hljs-number">1.42857143</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#333</span></span></span>;

  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">300</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">min-height</span>:<span class="hljs-value"> <span class="hljs-number">75</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">padding</span>:<span class="hljs-value"> <span class="hljs-number">10</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">padding-left</span>:<span class="hljs-value"> <span class="hljs-number">70</span>px</span></span>;

  <span class="hljs-rule"><span class="hljs-attribute">border-radius</span>:<span class="hljs-value"> <span class="hljs-number">5</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">-webkit-box-shadow</span>:<span class="hljs-value"> <span class="hljs-number">0</span> <span class="hljs-number">2</span>px <span class="hljs-number">3</span>px <span class="hljs-function">rgba(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,.<span class="hljs-number">3</span>)</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">box-shadow</span>:<span class="hljs-value"> <span class="hljs-number">0</span> <span class="hljs-number">2</span>px <span class="hljs-number">3</span>px <span class="hljs-function">rgba(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,.<span class="hljs-number">3</span>)</span></span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">background</span>:<span class="hljs-value"> <span class="hljs-hexcolor">#f7f7f9</span></span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-class">.usercard-avatar</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value"> absolute</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">left</span>:<span class="hljs-value"> <span class="hljs-number">10</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">50</span>px</span></span>;
<span class="hljs-rule">}</span></span>

<span class="hljs-class">.usercard-close-btn</span> <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value"> absolute</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">top</span>:<span class="hljs-value"> <span class="hljs-number">10</span>px</span></span>;
  <span class="hljs-rule"><span class="hljs-attribute">right</span>:<span class="hljs-value"> <span class="hljs-number">10</span>px</span></span>;
<span class="hljs-rule">}</span></span>
</code></pre>
<p>How does the Blade look in the Workbench now?</p>
<p>Time to look at the View Model.</p>
<h2 id="the-usercardviewmodel">The UsercardViewModel</h2>
<p>For this workshop we&#39;re using KnockoutJS as our data-binding solution. Knockout uses View Models that are logical representations of the views. A purist opinions of views is that that there
should be no business logic in a View Model, but we&#39;re building a reasonably simple
Blade (but feel free to refactor afterwards).</p>
<p>You can find the class definition for the User Card View Model in
<code>src/modularapp/chat/usercard/UsercardViewModel.js</code>; yeah, sorry about the folder structure!</p>
<p>Update the <code>UsercardViewModel</code> definition to look as follows:</p>
<pre><code class="lang-js"><span class="hljs-pi">'use strict'</span>;

<span class="hljs-keyword">var</span> ko = <span class="hljs-built_in">require</span>( <span class="hljs-string">'ko'</span> );

<span class="hljs-keyword">var</span> POSITION_DEFAULT = { x: <span class="hljs-string">'50%'</span>, y: <span class="hljs-number">0</span> };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">UsercardViewModel</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.avatarUrl = ko.observable(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">this</span>.name = ko.observable(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">this</span>.company = ko.observable(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">this</span>.email = ko.observable(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">this</span>.location = ko.observable(<span class="hljs-string">''</span>);

  <span class="hljs-keyword">this</span>.cardShown = ko.observable( <span class="hljs-literal">true</span> );
    <span class="hljs-keyword">this</span>.position = ko.observable( pixelify( POSITION_DEFAULT ) );
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pixelify</span><span class="hljs-params">( pos )</span> {</span>
    <span class="hljs-keyword">var</span> newPos = {};
    <span class="hljs-keyword">var</span> value;
    <span class="hljs-keyword">for</span>( <span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> pos ) {
        value = pos[ prop ];
        <span class="hljs-comment">// only add px to number values</span>
        <span class="hljs-keyword">if</span>( <span class="hljs-built_in">isNaN</span>( value ) === <span class="hljs-literal">false</span> ) {
            newPos[ prop ] = value + <span class="hljs-string">'px'</span>;
        }
        <span class="hljs-keyword">else</span> {
            newPos[ prop ] = value;
        }
    }
    <span class="hljs-keyword">return</span> newPos;
}

module.exports = UsercardViewModel;
</code></pre>
<p><strong>You&#39;ll noticed that the tooling supports Node.js-style <code>require( &#39;module&#39; )</code> calls
and the functionality that the file exposes is determined via assignment to <code>module.exports</code>.</strong></p>
<p>The first set of properties are pretty obvious - they hold the user information.</p>
<p>The <code>cardShown</code> property is used to indicate if the Blade should be shown.
This is because the User Card should only be shown if the user has requested to
see more information about another user. *Right now this defaults to <code>true</code> (shown)
but later we&#39;ll need to default to <code>false</code>.</p>
<p>The <code>position</code> property is required because the User Card may be shown next to
the UI element that has been clicked on when selecting a user.</p>
<p>Enough hand-holding! Time for some real exercises:</p>
<h2 id="ensure-the-user-card-can-be-hidden-via-the-close-button">Ensure the User Card can be Hidden via the Close Button</h2>
<p>Bind the <code>button</code> element to a click event which calls a <code>closeClicked</code> function
on the View Model. It should also set the <code>cardShown</code> property to <code>false</code>.</p>
<pre><code class="lang-js">UsercardViewModel.prototype.closeClicked = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data, event )</span> {</span>
  <span class="hljs-comment">// TODO: hide card</span>
};
</code></pre>
<p>Over to you to to implement the click handler and add the appropriate data-bindings
to the view (<code>view.html</code>).</p>
<h5 id="hints">Hints</h5>
<ul>
<li>Use the <a href="http://knockoutjs.com/documentation/click-binding.html" target="_blank">click binding</a> to set up the click event</li>
<li>Use the <a href="http://knockoutjs.com/documentation/visible-binding.html" target="_blank">visible binding</a> to
bind to this property to the element with the class of <code>chat-usercard</code></li>
<li>Use the Workbench to check the close button works and the User Card is hidden</li>
</ul>
<h5 id="solution">Solution</h5>
<p>If you&#39;ve not used KnockoutJS before or you just want to check your solution here it is:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">section</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"chat-usercard"</span>
                 <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"visible: cardShown"</span>
                 <span class="hljs-attribute">id</span>=<span class="hljs-value">"modularapp.chat.usercard.view-template"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-avatar"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-name"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-company"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-email"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-location"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"click: closeClicked"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"btn btn-default btn-xs usercard-close-btn"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"glyphicon glyphicon-remove"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>
</code></pre>
<h3 id="bind-the-user-properties-to-the-view">Bind the User Properties to the View</h3>
<p>Start by binding the obvious user properties to the view. In order to do this
you&#39;ll need to update the view definition with appropriate usage of
<code>data-bind</code>.</p>
<p>In order to test the binding without editing your application code you can use
the Workbench.</p>
<p>The Workbench code can be found in <code>chat-bladeset/blades/usercard/workbench/index.html</code>.</p>
<p>You can easily add code to manipulate the properties on the View Model e.g.</p>
<pre><code>var model = new UsercardViewModel();
model.name( &#39;Jive Bunny&#39; );
</code></pre><h5 id="hint-">Hint:</h5>
<ul>
<li>The <em>Visualise Knockout View Model</em> Workbench tool can be handy when checking
the values of the Blade&#39;s View Model.</li>
</ul>
<h5 id="solution-">Solution:</h5>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">section</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"chat-usercard"</span>
                <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"visible: cardShown"</span>
                <span class="hljs-attribute">id</span>=<span class="hljs-value">"modularapp.chat.usercard.view-template"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-avatar"</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"attr: { src: avatarUrl }"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-name"</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: name"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-company"</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: company"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-email"</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: email"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"usercard-location"</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"text: location"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">data-bind</span>=<span class="hljs-value">"click: closeClicked"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"btn btn-default btn-xs usercard-close-btn"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"glyphicon glyphicon-remove"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">section</span>&gt;</span>
</code></pre>
<h3 id="don-t-show-the-user-card-by-default">Don&#39;t Show the User Card by Default</h3>
<p>By default the <code>cardShown</code> should be <code>false</code> this can make things difficult during
development. We can use the Workbench to help here - open <code>workbench/index.html</code> and change
the value to help development after we&#39;ve completed this task.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> model = <span class="hljs-keyword">new</span> UsercardViewModel();
model.cardShown( <span class="hljs-literal">true</span> );
</code></pre>
<h3 id="set-the-position-of-the-user-card-if-time-">Set the Position of the User Card (<em>if time</em>)</h3>
<p>When the user requests to see more information about a user they may do this via
the UI. If that&#39;s the case the User Card should be positioned where the UI interaction
was performed. Because of this it&#39;s necessary to be able to position the User
Card via the <code>position</code> observable.</p>
<p>This property should have a value with an <code>x</code> and <code>y</code> that can be set to
<code>style.left</code> and <code>style.top</code> respectively. The <code>pixelify</code> function that
we added to the View Model helps make sure any <code>Number</code> values are given
a <code>px</code> suffix. Any other value types are left unaltered.</p>
<p>So, use the KnockoutJS <a href="http://knockoutjs.com/documentation/style-binding.html" target="_blank">style binding</a>
to set the position on the <code>class=&quot;chat-usercard&quot;</code> element.</p>
<p>Once you&#39;ve added the binding create a <code>userSelected( data )</code> function that sets the user
information as well as optionally supplying a position. The <code>data</code> parameter
should take the following structure:</p>
<pre><code class="lang-js">{
  userId: <span class="hljs-built_in">String</span>
  position: {
    x: <span class="hljs-built_in">Number</span>,
    y: <span class="hljs-built_in">Number</span>
  }
}
</code></pre>
<p>For now, concentrate on ensuring the function can handle the <code>position</code> property
is optional on the <code>data</code> parameter. We&#39;ll deal with user data later.</p>
<pre><code class="lang-js">UsercardViewModel.prototype.userSelected = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span> {</span>
    <span class="hljs-comment">// TODO: set position</span>
};
</code></pre>
<h5 id="hint">Hint</h5>
<ul>
<li>Use the Workbench to set the <code>position</code> property and make sure everything is working
as expected.</li>
<li>Default to the values set in the <code>POSITION_DEFAULT</code> variable</li>
<li>Use the Workbench to call the <code>userSelected</code> function with different parameters</li>
</ul>
<h2 id="test-the-usercardviewmodel">Test the UsercardViewModel</h2>
<p>A key part of building a quality maintainable application is that it&#39;s tested. So,
let&#39;s write a test that checks the User Card defaults to not being shown.</p>
<p>Navigate to <code>test/test-unit/js-test-drive/tests</code> and update <code>UsercardViewModelTest.js</code>
as follows:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> UsercardViewModelTest = TestCase( <span class="hljs-string">'UsercardViewModelTest'</span> );

<span class="hljs-keyword">var</span> UsercardViewModel = <span class="hljs-built_in">require</span>( <span class="hljs-string">'modularapp/chat/usercard/UsercardViewModel'</span> );

UsercardViewModelTest.prototype.testCardShownDefaultsToFalse = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
  <span class="hljs-keyword">var</span> model = <span class="hljs-keyword">new</span> UsercardViewModel();
  assertTrue( model.cardShown() );
};
</code></pre>
<p><em>Yeah, this should fail! We&#39;ll fix that shortly.</em></p>
<h3 id="running-tests">Running Tests</h3>
<p>There are lots of testing tools available. BladeRunnerJS comes with <a href="https://code.google.com/p/js-test-driver/" target="_blank">js-test-driver</a>
built-in.</p>
<p>In order to run the tests you first need to start the test server. From the <code>sdk</code>
directory run:</p>
<pre><code>./brjs test-server --no-browser
</code></pre><p>In your browser navigate to <a href="http://localhost:4224/capture" target="_blank">http://localhost:4224/capture</a>. This is the browser window/tab
that the test server will instruct to execute your tests.</p>
<p>Now that the test server is running open another terminal/command prompt and execute
the following from the <code>sdk</code> directory:</p>
<pre><code>./brjs test ../apps/modularapp/chat-bladeset/blades/usercard
</code></pre><p>This will execute all the tests it finds within that directory. For now, this
is just the single test that we&#39;ve written.</p>
<p>You should see output similar to the following:</p>
<pre><code> ./brjs test ../apps/modularapp/chat-bladeset/blades/usercard

Testing tests (UTs):
Chrome: Reset
Chrome: Reset
F
Total 1 tests (Passed: 0; Fails: 1; Errors: 0) (3.00 ms)
  Chrome 34.0.1847.131 Mac OS: Run 1 tests (Passed: 0; Fails: 1; Errors 0) (3.00 ms)
    UsercardViewModelTest.testCardShownDefaultsToFalse failed (3.00 ms): AssertError: expected true but was false
      Error: expected true but was false
          at UsercardViewModelTest.testCardShownDefaultsToFalse (http://localhost:4224/test/tests/UsercardViewModelTest.js:7:21)

Tests failed: Tests failed. See log for details.
Tests Failed.

- Time Taken: 2secs
Error:
  Test failure or error while running tests.
</code></pre><p>Let&#39;s fix that error by updating the test to correctly <code>assertFalse</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> UsercardViewModelTest = TestCase( <span class="hljs-string">'UsercardViewModelTest'</span> );

<span class="hljs-keyword">var</span> UsercardViewModel = <span class="hljs-built_in">require</span>( <span class="hljs-string">'modularapp/chat/usercard/UsercardViewModel'</span> );

UsercardViewModelTest.prototype.testCardShownDefaultsToFalse = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
  <span class="hljs-keyword">var</span> model = <span class="hljs-keyword">new</span> UsercardViewModel();
  assertFalse( model.cardShown() );
};
</code></pre>
<p>If you run the <code>brjs test</code> command the test will now pass:</p>
<pre><code> ./brjs test ../apps/modularapp/chat-bladeset/blades/usercard

Testing tests (UTs):
Chrome: Reset
Chrome: Reset
.
Total 1 tests (Passed: 1; Fails: 0; Errors: 0) (2.00 ms)
  Chrome 34.0.1847.131 Mac OS: Run 1 tests (Passed: 1; Fails: 0; Errors 0) (2.00 ms)
Tests Passed.

- Time Taken: 2secs
</code></pre><p>We&#39;ve now written our first test and made it pass.</p>
<p>For full details see the <a href="http://bladerunnerjs.org/docs/use/running_tests/" target="_blank">Running Test documentation</a>.</p>
<h3 id="additional-tests-if-time-">Additional Tests (if time)</h3>
<p>Now that you know how to write and run tests you can also write test that assert
the functionality the Blade is to provide:</p>
<ul>
<li>Test your handling of the optional <code>data.position</code> parameter to the <code>userSelected</code> function</li>
<li>If time, check the <code>UsercardViewModel</code> properties are initialised as expected from the
data structure that&#39;s passed to its constructor</li>
</ul>
<p><em>Heads Up! test functions must have a name with the <code>test</code> prefix e.g. <code>testThisThing</code></em></p>
<h2 id="basic-blade-functionality-complete-push-to-github">Basic Blade Functionality Complete - push to github</h2>
<p>Congratulations! The basic functionality for this Blade is complete. It&#39;s time to
commit your changes locally and push them to github.</p>
<ul>
<li><code>git add chat-bladeset/blades/usercard</code></li>
<li><code>git commit -m &#39;basic user card blade functionality&#39;</code></li>
<li><code>git pull origin master</code></li>
<li>Fix any merge conflicts - <em>there shouldn&#39;t be any</em></li>
<li><code>git push origin master</code></li>
</ul>
<h2 id="where-next-">Where next?</h2>
<p>If you&#39;ve completed this really quickly you can always try creating another Blade.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../blades/messages_blade.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../blades/retrospective.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        

    
    <script src="../gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
